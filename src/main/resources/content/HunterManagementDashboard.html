<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hunter Management Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        input, select, button { margin: 10px 0; padding: 5px; }
        .error { color: red; }
    </style>
</head>
<body>
<h1>Hunter Management Dashboard</h1>

<h2>Create New Hunter</h2>
<form id="createHunterForm">
    <input type="text" id="hunterName" placeholder="Hunter Name" required>
    <select id="areaSelect" required>
        <option value="">Select Area</option>
    </select>
    <button type="submit">Create Hunter</button>
</form>

<h2>All Hunters</h2>
<button onclick="getAllHunters()">Refresh Hunters</button>
<table id="huntersTable">
    <thead>
    <tr>
        <th>Name</th>
        <th>Area</th>
    </tr>
    </thead>
    <tbody id="huntersTableBody"></tbody>
</table>

<h2>Hunters by Area</h2>
<select id="searchAreaSelect">
    <option value="">Select Area</option>
</select>
<button onclick="getHuntersByArea()">Search</button>
<table id="areaHuntersTable">
    <thead>
    <tr>
        <th>Name</th>
        <th>Area</th>
    </tr>
    </thead>
    <tbody id="areaHuntersTableBody"></tbody>
</table>

<div id="errorContainer" class="error"></div>

<script>
    // Base URL for REST services (adjust as needed)
    const BASE_URL = 'http://localhost';

    // Global variable to store areas
    let areasCache = [];

    // Populate Area Dropdowns
    async function populateAreaDropdowns() {
        try {
            const response = await fetch(`${BASE_URL}/area`);
            const areas = await response.json();
            areasCache = areas;

            const createAreaSelect = document.getElementById('areaSelect');
            const searchAreaSelect = document.getElementById('searchAreaSelect');

            // Clear existing options (except first)
            while (createAreaSelect.options.length > 1) {
                createAreaSelect.remove(1);
            }
            while (searchAreaSelect.options.length > 1) {
                searchAreaSelect.remove(1);
            }

            // Populate both dropdowns
            areas.forEach(area => {
                // Try to handle different possible area object structures
                const areaId = area.id || area.areaId || area.area_id;
                const areaName = area.name || area.areaName || area.area_name || `Area ${areaId}`;

                const createOption = new Option(areaName, areaId);
                const searchOption = new Option(areaName, areaId);

                createAreaSelect.add(createOption);
                searchAreaSelect.add(searchOption);
            });
        } catch (error) {
            console.error('Error fetching areas:', error);
            document.getElementById('errorContainer').textContent =
                'Failed to load areas. Please check server connection.';
        }
    }

    // Create Hunter
    document.getElementById('createHunterForm').addEventListener